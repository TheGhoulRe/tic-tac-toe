(this["webpackJsonptic-tac-toe"]=this["webpackJsonptic-tac-toe"]||[]).push([[0],{13:function(t,e,n){},38:function(t,e,n){},59:function(t,e,n){},68:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),c=n(30),s=n.n(c),i=(n(38),n(6)),u=n(4),o=(n(13),n(3)),l=n(2),b=n.n(l),h=n(5),j=n(19),d=n.n(j);function p(t){this.getFrom=function(){var e=Object(h.a)(b.a.mark((function e(n){var a,r,c=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:function(t){},e.next=3,d.a.get(t+n);case 3:return r=e.sent.data,a(r),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.postDataTo=function(){var e=Object(h.a)(b.a.mark((function e(n,a){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post(t+n,a);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}function f(t,e){var n=new p(t),a=null;this.getFrom=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){};a=setInterval((function(){n.getFrom(t,r)}),e)},this.stop=function(){clearInterval(a),a=null}}var O=n(0),m=new p("https://intense-falls-95882.herokuapp.com");function x(t){var e=t.setUser,n=t.setHost,a=t.history,r=t.match,c=a.replace,s=r.params,i=s.host;return function(t,e,n,a,r){v.apply(this,arguments)}(s.guest,i,c,n,e),Object(O.jsx)("div",{})}function v(){return(v=Object(h.a)(b.a.mark((function t(e,n,a,r,c){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.getFrom("/addguest/".concat(n,"/").concat(e));case 2:localStorage.username=e,localStorage.extraUser=n,r(n),c(e),a("/game/".concat(n,"/").concat(e));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var g=new p("https://intense-falls-95882.herokuapp.com");function k(t){var e=t.setUser,n=t.setHost,r=t.history.push,c=Object(a.useState)(!0),s=Object(u.a)(c,2),i=s[0],o=s[1];return Object(O.jsxs)("div",{className:"multiplayer-login",children:[Object(O.jsx)("div",{children:"Enter your nickname"}),Object(O.jsx)("br",{}),Object(O.jsx)("input",{className:"button",type:"text",id:"nickname",maxLength:16,onChange:function(){return o(w(y(),C()))},placeholder:"your nickname..."}),Object(O.jsx)("br",{}),Object(O.jsx)("input",{className:"button",type:"text",id:"guestname",maxLength:16,onChange:function(){return o(w(y(),C()))},placeholder:"guest's nickname..."}),Object(O.jsx)("br",{}),!i&&Object(O.jsx)("div",{className:"warning-text",children:"The username or the guest name is invalid."}),Object(O.jsx)("button",{className:"button",disabled:!i&&"disabled",onClick:Object(h.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S(y(),C(),r,n,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),children:"Start Game"})]})}function w(t,e){return t!==e&&(""!==t&&""!==e&&(!/[^a-zA-Z0-9]/.test(t)&&!/[^a-zA-Z0-9]/.test(e)))}function y(){return document.getElementById("nickname").value}function C(){return document.getElementById("guestname").value}function S(t,e,n,a,r){return N.apply(this,arguments)}function N(){return(N=Object(h.a)(b.a.mark((function t(e,n,a,r,c){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.getFrom("/adduser/".concat(e,"/").concat(n));case 2:localStorage.username=e,localStorage.extraUser=n,r(n),c(e),a("/game/".concat(e,"/").concat(n));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var X=n(10),F=n(11),I=n(15),T=n(14);function M(t){return"X"===t?Object(O.jsx)("div",{className:"bi-x X"}):"O"===t?Object(O.jsx)("div",{className:"bi-circle O"}):t}function E(t){return Object(O.jsx)("table",{children:Object(O.jsxs)("tbody",{children:[Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{className:"a",onClick:function(){return t.handleCellClick(0)},children:M(t.table[0])}),Object(O.jsx)("td",{className:"b",onClick:function(){return t.handleCellClick(1)},children:M(t.table[1])}),Object(O.jsx)("td",{className:"c",onClick:function(){return t.handleCellClick(2)},children:M(t.table[2])})]}),Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{className:"d",onClick:function(){return t.handleCellClick(3)},children:M(t.table[3])}),Object(O.jsx)("td",{className:"e",onClick:function(){return t.handleCellClick(4)},children:M(t.table[4])}),Object(O.jsx)("td",{className:"f",onClick:function(){return t.handleCellClick(5)},children:M(t.table[5])})]}),Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{className:"g",onClick:function(){return t.handleCellClick(6)},children:M(t.table[6])}),Object(O.jsx)("td",{className:"h",onClick:function(){return t.handleCellClick(7)},children:M(t.table[7])}),Object(O.jsx)("td",{className:"i",onClick:function(){return t.handleCellClick(8)},children:M(t.table[8])})]})]})})}var U=function(){function t(e){Object(X.a)(this,t),this.table=e}return Object(F.a)(t,[{key:"didWin",value:function(){return!!this.checkHorizontal()||(!!this.checkVertical()||(!!this.checkMajorDiagonal()||!!this.checkMinorDiagonal()))}},{key:"checkHorizontal",value:function(){for(var t=0;t<3;t++)if(this.table[3*t+0]===this.table[3*t+1]&&this.table[3*t+1]===this.table[3*t+2]&&" "!==this.table[3*t+0])return!0;return!1}},{key:"checkVertical",value:function(){for(var t=0;t<3;t++)if(this.table[t]===this.table[3+t]&&this.table[3+t]===this.table[6+t]&&" "!==this.table[t])return!0;return!1}},{key:"checkMajorDiagonal",value:function(){return this.table[0]===this.table[4]&&this.table[4]===this.table[8]&&" "!==this.table[0]}},{key:"checkMinorDiagonal",value:function(){return this.table[2]===this.table[4]&&this.table[4]===this.table[6]&&" "!==this.table[2]}}]),t}();function B(t){return new U(t).didWin()}var H=function(t){Object(I.a)(n,t);var e=Object(T.a)(n);function n(){var t;Object(X.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={table:[" "," "," "," "," "," "," "," "," "],isXturn:!0,progress:0,ended:!1,started:!1},t.handleCellClick=function(){var e=Object(h.a)(b.a.mark((function e(n){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state.progress<=8&&" "===t.state.table[n]&&!t.state.ended&&((a=Object(i.a)({},t.state)).table[n]=a.isXturn?"X":"O",a.isXturn=!a.isXturn,a.progress++,B(a.table)&&(a.ended=!0),a.progress>8&&(a.ended=!0),t.setState(Object(i.a)(Object(i.a)({},a),{},{started:!0})),t.waitForNextMove());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.cpuClick=function(e){if(!t.state.isXturn&&t.state.progress<=8&&" "===t.state.table[e]&&!t.state.ended){var n=Object(i.a)({},t.state);n.table[e]=n.isXturn?"X":"O",n.isXturn=!n.isXturn,n.progress++,B(n.table)&&(n.ended=!0),n.progress>8&&(n.ended=!0),t.setState(n)}},t.resetState=function(){t.setState({table:[" "," "," "," "," "," "," "," "," "],isXturn:t.state.isXturn,progress:0,ended:!1,started:!1})},t}return Object(F.a)(n,[{key:"sleep",value:function(t){return new Promise((function(e,n){setTimeout((function(){return e()}),t)}))}},{key:"waitForNextMove",value:function(){var t=Object(h.a)(b.a.mark((function t(){var e,n=this;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=function t(){var e=parseInt((9*Math.random()).toString());return" "===n.state.table[e]?e:t()}(),t.next=4,this.sleep(1e3);case 4:this.cpuClick(e);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"isEmpty",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.length===e||" "===t[e]&&this.isEmpty(t,e+1)}},{key:"render",value:function(){var t=this;return this.state.started||!this.isEmpty(this.state.table)||this.state.isXturn||(this.waitForNextMove(),this.setState(Object(i.a)(Object(i.a)({},this.state),{},{started:!0}))),Object(O.jsx)("div",{children:Object(O.jsxs)("center",{children:[Object(O.jsx)("h1",{children:"Game"}),Object(O.jsx)(E,{handleCellClick:function(e){t.state.isXturn&&t.handleCellClick(e)},table:this.state.table}),Object(O.jsx)("h1",{children:this.state.ended?this.state.progress<=8?this.state.isXturn?"O won":"X won":"it's a draw!":"is ".concat(this.state.isXturn?"X":"O"," turn")}),this.state.ended&&Object(O.jsx)("button",{onClick:this.resetState,className:"resetButton",children:"Reset"})]})})}}]),n}(a.Component),L=function(t){Object(I.a)(n,t);var e=Object(T.a)(n);function n(){var t;Object(X.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={table:[" "," "," "," "," "," "," "," "," "],isXturn:!0,progress:0,ended:!1},t.handleCellClick=function(e){if(t.state.progress<=8&&" "===t.state.table[e]&&!t.state.ended){var n=Object(i.a)({},t.state);n.table[e]=n.isXturn?"X":"O",n.isXturn=!n.isXturn,n.progress++,B(n.table)&&(n.ended=!0),n.progress>8&&(n.ended=!0),t.setState(n)}},t.resetState=function(){t.setState({table:[" "," "," "," "," "," "," "," "," "],isXturn:t.state.isXturn,progress:0,ended:!1})},t}return Object(F.a)(n,[{key:"render",value:function(){return Object(O.jsx)("div",{children:Object(O.jsxs)("center",{children:[Object(O.jsx)("h1",{children:"Local Play"}),Object(O.jsx)(E,{handleCellClick:this.handleCellClick,table:this.state.table}),Object(O.jsx)("h1",{children:this.state.ended?this.state.progress<=8?this.state.isXturn?"O won":"X won":"it's a draw!":"is ".concat(this.state.isXturn?"X":"O"," turn")}),this.state.ended&&Object(O.jsx)("button",{onClick:this.resetState,className:"resetButton",children:"Reset"})]})})}}]),n}(a.Component),D=n(31),W=n.n(D),A=new p("https://intense-falls-95882.herokuapp.com"),P=new f("https://intense-falls-95882.herokuapp.com",3e3),z=new W.a,G={host:"",guest:""};function R(t){var e=t.match.params,n=t.user,r=t.changeWhoseTurn,c=e.host,s=e.guest,i=Object(a.useState)([" "," "," "," "," "," "," "," "," "]),o=Object(u.a)(i,2),l=o[0],j=o[1],d=Object(a.useState)(!1),p=Object(u.a)(d,2),f=p[0],m=p[1],x=Object(a.useState)(0),v=Object(u.a)(x,2),g=v[0],k=v[1],w=Object(a.useState)("block"),y=Object(u.a)(w,2),C=y[0],S=y[1],N=Object(a.useState)(!1),X=Object(u.a)(N,2),F=X[0],I=X[1],T=Object(a.useState)(!0),M=Object(u.a)(T,2),U=M[0],H=M[1],L=Object(a.useState)(!1),D=Object(u.a)(L,2),W=D[0],R=D[1],Z=Object(a.useState)(""),K=Object(u.a)(Z,2),_=K[0],tt=K[1],et=Object(a.useState)(!0),nt=Object(u.a)(et,2),at=nt[0],rt=nt[1],ct=Object(a.useState)(!1),st=Object(u.a)(ct,2),it=st[0],ut=st[1],ot=[j,m,k,H,R,ut];z.on("started",(function(){G.host=c,G.guest=s}));var lt=function(){var t=Object(h.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:P.getFrom("/guestactive/".concat(c,"/").concat(s),(function(t){parseInt(t)&&(P.stop(),bt(),z.emit("started"),S("none"))}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),bt=function(){var t=Object(h.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:F||(I(!0),P.getFrom("/guestactive/".concat(c,"/").concat(s),(function(t){A.getFrom("/ifhasleft/".concat(c,"/").concat(s)),parseInt(t)||(tt("disconnected"),P.stop())})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ht=function(){var t=Object(h.a)(b.a.mark((function t(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y(1e3);case 2:return t.t0=parseInt,t.next=5,A.getFrom("/ifreset/".concat(c,"/").concat(s,"/").concat(n));case 5:if(t.t1=t.sent,e=(0,t.t0)(t.t1),!f){t.next=15;break}if(!e){t.next=12;break}return t.abrupt("return",V(ot,tt,n===c?s:c));case 12:return t.abrupt("return",ht());case 13:t.next=16;break;case 15:return t.abrupt("return",null);case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){var t=U?c:s;!W&&Q(l)&&n!==t&&(R(!0),$(l,f,g,U,ot,c,s,n)),at&&(rt(!1),lt()),f&&!it&&(ut(!0),ht())})),function(t,e,n,a,r,c,s,i,u,o){var l=s.host,j=s.guest,d=window,p=d.innerHeight;d.innerWidth;return Object(O.jsxs)("div",{id:"game",children:[Object(O.jsxs)("center",{children:[Object(O.jsx)("h1",{children:"Game"}),Object(O.jsx)(E,{handleCellClick:function(t){(u===l&&c||u===j&&!c)&&q(t,n,a,r,c,i,l,j,u)},table:n}),Object(O.jsx)("h1",{children:a?r<=8||B(n)?o(c?j+" won":l+" won"):o("it's a draw!"):o("".concat(c?l:j," turn"))}),t,a&&Object(O.jsx)("button",{className:"resetButton",onClick:function(){return function(t,e,n,a,r){return J.apply(this,arguments)}(a,l,j,i,u)},children:"Reset"})]}),Object(O.jsx)("div",{className:"first-prompt",style:{display:e},children:Object(O.jsxs)("div",{style:{top:"".concat(p/2-50,"px")},className:"waiting-screen",children:[Object(O.jsxs)("div",{className:"waiting-for-guest-text",children:["waiting for ",j,"..."]}),Object(O.jsx)("br",{}),"copy the url below ",Object(O.jsx)("br",{}),Object(O.jsxs)("div",{id:"link",children:["https://tic-tac-toe-ghoulr.netlify.app","/guest/",l,"/",j]}),Object(O.jsx)("br",{}),Object(O.jsx)("button",{id:"button",onClick:Object(h.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:document.getElementById("link").select();try{document.execCommand("copy"),document.getElementById("button").innerHTML="Copied"}catch(e){document.getElementById("button").innerHTML="Failed to copy"}case 2:case"end":return t.stop()}}),t)}))),children:"Copy Invite link"})]})})]})}(_,C,l,f,g,U,e,ot,n,r)}function J(){return(J=Object(h.a)(b.a.mark((function t(e,n,a,r,c){var s,i,o,l,h,j;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=Object(u.a)(r,6),i=s[0],o=s[1],l=s[2],s[3],h=s[4],j=s[5],i([" "," "," "," "," "," "," "," "," "]),l(0),o(!1),h(!1),j(!1),t.next=8,A.getFrom("/reset/".concat(n,"/").concat(a,"/").concat(c));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function V(t,e,n){return Z.apply(this,arguments)}function Z(){return(Z=Object(h.a)(b.a.mark((function t(e,n,a){var r,c,s,i,o,l;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(u.a)(e,6),c=r[0],s=r[1],i=r[2],r[3],o=r[4],l=r[5],c([" "," "," "," "," "," "," "," "," "]),i(0),s(!1),o(!1),l(!1),n("".concat(a," reset the game.")),t.next=9,Y(3e3);case 9:n("");case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function q(t,e,n,a,r,c,s,i,u){return K.apply(this,arguments)}function K(){return(K=Object(h.a)(b.a.mark((function t(e,n,a,r,c,s,i,o,l){var h,j,d,p,f,O;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r<=8&&" "===n[e])||a){t.next=18;break}return h=c?"X":"O",n[e]=h,c=!c,r++,t.next=7,A.postDataTo("/play/".concat(i,"/").concat(o),{name:l,pos:e,char:h});case 7:if(B(n)&&(a=!0),r>8&&(a=!0),j=Object(u.a)(s,4),d=j[0],p=j[1],f=j[2],O=j[3],d(n),O(c),f(r),p(a),l===(c?i:o)){t.next=18;break}return t.next=18,$(n,a,r,c,s,i,o,l);case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Q(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.length===e||" "===t[e]&&Q(t,e+1)}function Y(t){return new Promise((function(e,n){setTimeout((function(){return e()}),t)}))}function $(t,e,n,a,r,c,s,i){var u=new f("https://intense-falls-95882.herokuapp.com",1e3);u.getFrom("/collectupdate/".concat(c,"/").concat(s,"/").concat(i),(function(i){var o=parseInt(i);if(o>-1){var l=a?c:s;u.stop(),q(o,t,e,n,a,r,c,s,l)}}))}function _(t){var e=t.whoseTurn,n=t.currentUser,a=t.guestUser;return Object(O.jsxs)("div",{className:"header",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("span",{className:"bi-x-circle mainIconA"})," ",Object(O.jsx)("span",{className:"bi-circle mainIconB"})]}),Object(O.jsx)("div",{children:e}),Object(O.jsxs)("div",{children:[n," ",""!==n?" vs ...waiting"===a?"":"vs "+a:""]})]})}function tt(t){var e=t.history.push;return Object(O.jsxs)("div",{className:"home",children:[Object(O.jsx)("h2",{children:"Select a mode"}),Object(O.jsx)("button",{className:"buttons",onClick:function(){return e("/multiplayergame")},children:"Online Multi-player"}),Object(O.jsx)("br",{}),Object(O.jsx)("button",{className:"buttons",onClick:function(){return e("/localgame")},children:"Local Multi-player"}),Object(O.jsx)("br",{}),Object(O.jsx)("button",{className:"buttons",onClick:function(){return e("/cpugame")},children:"Single-player"})]})}window.addEventListener("beforeunload",(function(){""!==G.host&&""!==G.guest&&A.getFrom("/endgame/".concat(G.host,"/").concat(G.guest))}));n(59);var et=function(){var t=Object(a.useState)(localStorage.username),e=Object(u.a)(t,2),n=e[0],r=e[1],c=Object(a.useState)(localStorage.extraUser),s=Object(u.a)(c,2),l=s[0],b=s[1],h=Object(a.useState)(""),j=Object(u.a)(h,2),d=j[0],p=j[1];return Object(O.jsxs)("div",{children:[Object(O.jsx)(_,{currentUser:n,guestUser:l,whoseTurn:d}),Object(O.jsxs)(o.c,{children:[Object(O.jsx)(o.a,{path:"/guest/:host/:guest",render:function(t){return Object(O.jsx)(x,Object(i.a)({setUser:r,setHost:b},t))}}),Object(O.jsx)(o.a,{path:"/game/:host/:guest",render:function(t){return Object(O.jsx)(R,Object(i.a)({user:n,extrauser:l,changeWhoseTurn:function(t){return p(t)}},t))}}),Object(O.jsx)(o.a,{path:"/localgame",component:L}),Object(O.jsx)(o.a,{path:"/cpugame",render:function(t){return Object(O.jsx)(H,Object(i.a)({user:n,extrauser:l,changeWhoseTurn:function(t){return p(t)}},t))}}),Object(O.jsx)(o.a,{path:"/multiplayergame",render:function(t){return Object(O.jsx)(k,Object(i.a)({setUser:r,setHost:b},t))}}),Object(O.jsx)(o.a,{path:"/",component:tt})]})]})},nt=n(18),at=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,s=e.getTTFB;n(t),a(t),r(t),c(t),s(t)}))};localStorage.username="",localStorage.extraUser="",s.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(nt.a,{children:Object(O.jsx)(et,{})})}),document.getElementById("root")),at()}},[[68,1,2]]]);
//# sourceMappingURL=main.ba62ac5a.chunk.js.map